# 라우팅
- 어떤 네트워크 안에서 통신 데이터를 보낼 때 최적의 경로를 선택하는 과정이다.
  - 최적의 경로 : 주어진 데이터를 가장 짧은 거리로 또는 가장 적은 시간 안에 전송할 수 있는 경로
- 라우터 : 라우팅을 능동적으로 수행하는 장비
  - 목적지 네트워크로 가는 경로는 **라우팅 테이블**에 저장이 되며 라우터는 라우팅 테이블을 참조해 트래픽 전송
  - 라우팅 테이블은 관리자가 수동으로 구성하거나 라우팅 프로토콜을 통해 동적으로 학습 됨

# Connected Route and Local Route
- 관리자가 라우터의 각 인터페이스에 IP 주소를 설정
- 서브넷이 달라도 설정된 라우터의 인터페이스를 통해서 트래픽 전달

## Connected Route
- 인터페이스에 부여된 IP 주소가 Connected Route로 테이블에 자동으로 추가 됨
- 네트워크 트래픽을 Connected Route의 서브넷에 해당하는 인터페이스로 전달

<img src="https://user-images.githubusercontent.com/75015048/149615395-37bc9b03-1faf-4939-b2e2-73a4f9da3a83.png" width="80%">

## Local Route
- /32 서브넷으로 자동으로 추가됨 (/32는 1개의 IP만 가짐)
- 라우터 인터페이스 IP로 라우터가 패킷을 효율적으로 보낼 수 있게 지원

<img src="https://user-images.githubusercontent.com/75015048/149615395-37bc9b03-1faf-4939-b2e2-73a4f9da3a83.png" width="80%">

## Static Routes (정적 라우트)
- 라우터 인터페이스에 IP 주소를 설정하면 해당 라우터 장비내의 인터페이스만 트래픽 전달
- 다른 라우터와 연결했을 경우 연결된 라우터의 다른 인터페이스에 트래픽 전달이 안됨
- 관리자가 목적지 Static Route를 추가하거나 라우팅 프로토콜이 학습하도록 설정해야 라우팅 가능

### 장점
- 동적 경로 설정보다 관리자에 의한 라우팅 정보만을 참조하므로 라우터 자체의 부담이 없다.
- 동적 경로 설정보다 속도가 빠르며 안정적

### 단점
- 네트워크 변화가 빈번한 경우, 등록해야 할 네트워크 수가 많을 경우에는 능동적으로 경로 설정을 변경하기 어려움
- 관리자의 네트워크에 대한 설정 및 운영 지식 필요

## Dynamic Routes (동적 라우트)
- 동적인 라우팅으로 대규모 네트워크에 사용하며 인접한 라우터간에 동일한 라우팅 프로토콜을 설정하여 라우터 간에 변경된 네트워크에 대한 정보를 자동으로 교환하여 라우팅 하게 하는 방법
- 라우터는 각자 자신이 가지고 있는 IP 등의 정보를 다른 라우터에 Advertise(광고) 함
- 라우터는 이 정보를 통해 목적지 까지의 최적의 경로를 결정
- 만일 링크가 다운, 변경 되거나 라우터의 정보가 변경 되었을 때 라우터는 다른 라우터에게
정보를 업데이트 함
- 만일 네트워크가 변경되었을 때 라우터는 자동으로 새로운 최적으로 경로를 계산하고 라우
팅 테이블을 업데이트 함

### 장점 
- 네트워크 관리자는 초기 설정만 해주면 라우터간에 서로 라우팅 정보를 주고받아 라우팅 테이블을 라우터가 자동으로 작성
- 네트워크 변화에 능동적으로 대처가능
### 단점
- 라우터의 메모리를 정적 경로 설정보다 많이 차지

# 라우팅 프로토콜
<img src="https://user-images.githubusercontent.com/75015048/149615916-a276dc95-f94a-4e7c-9f5d-cbdb30c76ef1.png" width="80%">

- IGP (Interior gateway protocol)
  - **동일 그룹 내에서 라우팅 정보를 교환**, AS(Autonomous System)내에서 사용
  - AS는 동일 관리 대역(조직)을 의미 (예, KT통신망, SKT 통신망, 동일 기업의 네트워크)
- EGP (Exterior gateway protocol)
  - **다른 조직 간의 경로 정보를 교환**하기 위해 사용
  - 인터넷을 통한 다른 AS 간의 연결
  - **보안과 제어**
  - 프로토콜 : BGP (Border Gateway Protocol

## IGP (Interior gateway protocol) – Distance Vector Routing Protocols
- 거리와 방향을 기준으로 최적 경로를 탐색하는 프로토콜
- 네트워크 전체 토폴로지 정보가 없고 이웃장비와 직접 연결된 정보만 알고 있음
- 라우팅 업데이트시 최적 경로 정보를 전달
- 업데이트를 30초, 60초 간격으로 주기적으로 전달
- 빠르고 부하가 없는 것이 장점
- 대규모 네트워크에 사용하기에는 부적합
- 프로토콜: RIP, EIGRP

## IGP (Interior gateway protocol) – Link State Routing Protocols
- 자신의 인터페이스 상태정보를 광고(Advertise)
- 각 라우터들의 연결상태 정보를 주고 받아 전체 네트워크 토폴로지를 라우터가 파악 가능
- 라우팅 업데이트시 최적 경로 정보는 주어지지 않으므로 스스로 계산
- 업데이트 주기가 없고 네트워크 변경 시 즉시 업데이트 수행
- 상세한 설정이 가능하고 확장성이 좋아 대규모 네트워크에 적합
- 프로토콜: OSPF, IS-IS

## Distance Vector Protocol vs Link State Protocol 비교
<img src="https://camo.githubusercontent.com/e44c42e36e869cbb51f4b264aba06f1589c73cbbae4f38718afe02f810dc99bb/68747470733a2f2f7777772e6e6f74696f6e2e736f2f696d6167652f687474707325334125324625324673332d75732d776573742d322e616d617a6f6e6177732e636f6d2532467365637572652e6e6f74696f6e2d7374617469632e636f6d25324662303336386235612d326230642d343938352d393931642d383733383636623231313366253246556e7469746c65642e706e673f7461626c653d626c6f636b2669643d61326332353531622d306366302d343630392d383663362d35363533323438333661363226737061636549643d62343533626438352d636231352d343462352d626632652d3538306165646138303734652677696474683d32303030267573657249643d38303335326331322d363561342d343536322d396133362d3231373965643064666666622663616368653d7632" width="80%">

## RIP(Routing Information Protocol)
- 최초에 Xerox Network System(XNS) 프로토콜에 사용하기 위하여 설계된 프로토콜
- 1982년 버클리(Berkeley Standard Distribution) 버전의 UNIX에 탑재되기 시작하면서 유닉스와 TCP/IP에 결합되기 시작하였으며, 오늘날에도 가장 일반적으로 사용되는 라우팅 프로토콜 중 하나임.
- RIP에서 라우팅 테이블은 데이터그램 패킷을 통하여 모든 라우터에 방송(broadcast)되며, 송신자와 수신자 간의 거리는 패킷이 경유하는 라우터의 개수에 해당하는 hop 수로 표시.
- 최대 hop을 16으로 제한하므로 16 이상의 경우는 도달할 수 없는 네트워크를 의미
- 소규모 네트워크에 주로 이용되며, 네트워크 상황 변화에 신속하게 대처하지 못하며 멀티 캐스팅을 지원하지 못함.
## IGRP(Interior Gateway Routing Protocol)
- 시스코(Cisco)사에서 독자적으로 개발한 프로토콜
- 독립적인 네트워크 내에서만 사용하기 위해 개발된 것
- RIP와 유사하게 IGRP는 hop수를 기준으로 한 정보를 전송함
- 라우팅 경로의 결정은 회선의 전송 능력, 전송 지연 시간, 회선의 사용률, 신뢰성(에러율), MTU(Maximum Transmission Unit : 최대 전송 단위)를 바탕으로 함.
- 복수의 경로상에서 로드 밸런싱(Load Balancing) 기능을 지원함.
- RIP와 유사하지만, 크고 복잡한 네트워크를 위해 개발되었다는 점이 다름.


## 경계 게이트웨이 프로토콜
- 경계 게이트웨이 프로토콜(Border Gateway Protocol; BGP)은 외부 라우팅 프로토콜(EGP)로 관리 도메인(AS)과 관리 도메인 간 사용되는 라우팅 프로토콜
- 정해진 정책에 의하여 최적 라우팅 경로를 수립하며, 거리 벡터 방식의 라우팅 프로토콜로 다른 IGP보다 컨버전스는 느리지만, 대용량의 라우팅 정보를 교환할 수 있는 프로토콜
- TCP 포트 179번을 통하여 인접 라우터들과 이웃 관계를 성립하며, 이웃 라우터 간에는 유니캐스트 라우팅 업데이트를 실시한다.

## 라우팅 프로토콜 비교

|라우팅 방식	|거리 벡터	|링크 상태	|경로 벡터(Path Vector)|
|---:|:---:|:---:|:---:|
|업데이트|	인접 라우터	|아레아 내 모든 라우터	|경계 게이트웨이 프로토콜 이웃(BGP neighbor)
|업데이트 시점|	일정 주기	|링크 변화 발생 시	|링크 변화 발생 시
|경로선택|	벨만-포드 알고리즘|	다익스트라 알고리즘(Dijkstra Algorithm)|	정책기반
|메트릭|	홉수	|홉수, 대역폭, 지연 등 다양	|경로
|대표 프로토콜	|라우팅 정보 프로토콜, 내부 게이트웨이 |라우팅 프로토콜	최단 경로 우선 프로토콜, |	경계 게이트웨이 프로토콜
|||강화된 내부 게이트웨이 라우팅 프로토콜 (EIGRP)|
|분류|	IGP|	IGP|	EGP

# 참고
[라우팅 - 위키](https://ko.wikipedia.org/wiki/%EB%9D%BC%EC%9A%B0%ED%8C%85)

[https://goodmilktea.tistory.com/92](https://goodmilktea.tistory.com/92)

[라우팅이란 정적 경로 설정과 동적 경로 설정, IGP와 EGP, Distance Vector와 Link State에 관해서](https://butter-shower.tistory.com/21)

[라우팅 - 해시넷](http://wiki.hash.kr/index.php/%EB%9D%BC%EC%9A%B0%ED%8C%85)
