# 테스트 주도 개발(test-driven development, TDD)
- 선 개발 후 테스트 방식이 아닌 선 테스트 후 개발 방식의 프로그래밍 방법
- 먼저 자동화된 테스트 코드를 작성한 후 테스트를 통과하기 위한 코드를 개발하는 방식의 개발 방식
- 

## 테스트 코드를 먼저 작성하는 이유
- 깔끔한 코드를 작성
- 장기적으로 개발 비용 절감
- 개발 후 테스트 코드 작성의 번거로움
- 보다 튼튼한 객체 지향적인 코드 생산
  - TDD는 코드의 재사용 보장을 명시하므로 TDD를 통한 소프트웨어 개발 시 기능 별 철저한 모듈화가 이뤄진다. 이는 종속성과 의존성이 낮은 모듈로 조합된 소프트웨어 개발을 가능하게 하며 필요에 따라 모듈을 추가하거나 제거해도 소프트웨어 전체 구조에 영향을 미치지 않게 된다.

- 재설계 시간의 단축, 기능 명세의 구체화
  - 테스트 코드를 먼저 작성하기 때문에 개발자가 지금 무엇을 해야하는지 분명히 정의하고 개발을 시작하게 된다. 또한 테스트 시나리오를 작성하면서 다양한 예외사항에 대해 생각해볼 수 있다. 이는 개발 진행 중 소프트웨어의 전반적인 설계가 변경되는 일을 방지한다.
  - 테스트할 기능을 실행하고, 결과를 검증하는 과정에서 설계도 같이 진행

- 디버깅 시간의 단축
  - 사용자의 데이터가 잘못 나온다면 DB의 문제인지, 비즈니스 레이어의 문제인지 UI의 문제인지 실제 모든 레이러들을 전부 디버깅 해야하지만, TDD의 경우 자동화 된 유닛테스팅을 전재하므로 특정 버그를 손 쉽게 찾음.

- 테스트 문서의 대체 가능
  - 테스팅을 자동화 시킴과 동시에 보다 정확한 테스트 근거를 산출한다.

- 추가 구현의 용이함
  - 자동화된 유닛 테스팅을 전제하므로 테스트 기간을 획기적으로 단축할 수 있다.

## TDD 프로그래밍 방법 및 순서 
- 실패하는 작은 단위 테스트를 작성
- 빨리 테스트를 통과하기 위해 프로덕션 코드를 작성( **테스트를 통과 할 정도** )
- 그 다음의 테스트 코드를 작성, 실패 테스트가 없을 경우에만 성공 테스트를 작성
- 새로운 테스트를 통과하기 위해 프로덕션 코드를 추가 또는 수정
- 위 과정을 반복하며 실패/성공의 모든 테스트 케이스를 작성
- 개발된 코드들에 대해 모든 중복을 제거하며 리팩토링

- 쉬운 경우에서 어려운 경우로 진행
- 예외적인 경우에서 정상적인 경우로 진행
  - 한번에 구현 하는 시간이 짧아지면 디버깅에 유리
- 테스트 사례를 추가하면서 딱 필요한 만큼만 설계하고 필요에 따라 변경하기


## TDD 접근 방법 
- 가짜로 구현하기: 최대한 빨리 테스트를 통과하기 위해 정답이 아닌 **가짜 정답을 구현**
- 삼각측량법: 값이 다른 여러 테스트를 작성하고, 이를 **일반화**하여 정답을 구현
- 명백하게 구현하기: 정답을 바로 구현하는 방법
 
### 가짜로 구현하기
- 실패하는 테스트를 가장 빠르게 구현하는 방법은 아무 값이나 반환하도록 하는 것 그리고 테스트가 통과하면 단계적으로 상수를 변수를 사용하도록 변형

#### given/when/then 패턴
given-when-then 패턴이란 1개의 단위 테스트를 3가지 단계로 나누어 처리하는 패턴
- given(준비/상황): 어떠한 데이터가 준비되었을 때
- when(실행): 어떠한 함수를 실행하면
- then(검증/결과 확인): 어떠한 결과가 나와야 한다.

#### 예시
~~~java
@Test
public void 곱하기테스트() {
    // given
    
    // when
    final int result = multiply(2, 3);
    
    // then
    assertThat(result).isEqualTo(6);
}
~~~ 
- 해당 테스트를 가장 빠르게 통과하는 방법은 6을 반환하는 것

~~~java
public int multiply(final int num1, final int num2) {
    return 6;
}
~~~
**변수를 사용하지 않고 상수를 반환하며, 답이 아닌 방법으로 가짜 구현하여 최대한 빨리 테스트를 통과하는 것** 

- 가짜 구현으로 개발 시 얻는 효과
  - 하나의 구체적인 예에서 일반화를 함으로써, 불필요한 고민으로 혼동되는 일을 예방
 

 

### 삼각 측량
- 테스트 주도로 추상화된 과정을 일반화하는 과정
- 테스트 예시가 2개 이상일 때에만 추상화 진행

~~~java
@Test
public void 곱하기테스트() {
    // given
    
    // when
    final int result1 = multiply(2, 3);
    final int result2 = multiply(4, 7);
    
    // then
    assertThat(result1).isEqualTo(6);
    assertThat(result2).isEqualTo(28);
}
~~~

### 명백하게 구현하기
- 가짜 구현이나 삼각 측량 방법을 사용하지 않고 바로 정답을 구현하는 방법
- 예시 처럼 바로 바로 작성이 가능한 경우.

~~~java
public int multiply(final int num1, final int num2) {
    return num1 * num2;
}
~~~~

# 참고
[단위 테스트와 TDD(테스트 주도 개발) 프로그래밍 방법 소개 - (1/5) - MangKyu's Diary](https://mangkyu.tistory.com/182)

[JUnit을 활용한 Java 단위 테스트 코드 작성법 (2/3) - MangKyu's Diary](https://mangkyu.tistory.com/144)

테스트 주도 개발 시작하기 - 최범균

[TDD 방법론](http://clipsoft.co.kr/wp/blog/tddtest-driven-development-%EB%B0%A9%EB%B2%95%EB%A1%A0/)
