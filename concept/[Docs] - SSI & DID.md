# SSI ( Self-sovereign identities )
- An approach to digital identity that gives individuals control of their digital identities.
- digital identities that are managed in a decentralized manner

- 사용자는 데이터를 저장하고 중앙에서 관리하는 타사 공급자에 의존하지 않고 디지털 ID를 자체 관리하는 것을 의미
- 상호 작용에 대한 신뢰 구축의 어려움을 해결 ( 중앙화 된 가관이 보증해줘서 신뢰를 해주던 것을 해결 )
- 의도하지 않은 개인 데이터의 공유X
- 식별자를 보유한 사용자(holder)는 분산 식별자(verifiable credentials ) 라고 하는 고유 식별자 를 생성하고 제어
- 대부분의 SSI 시스템은 암호화 지갑(Wallet)을 사용하여 자격 증명을 관리 하고 분산 원장에 고정된 공개 키 암호화 를 사용하여 검증하는 탈 중앙화 시스템
- 자격 증명에는 발급자의 데이터베이스, 소셜 미디어 계정 , 전자 상거래 사이트의 거래 내역 또는 친구나 동료 의 증명 데이터가 포함가능

# DID (Decentralized Identifiers, Digital Identifiers)
- 분산 원장 기술 혹은 다른 형태의 분권형 네트워크에 등록되어 있기 때문에 중앙화된 등록 기관에 등록이 필요하지 않은 전 세계적으로 유일한 식별자

- DID 의 Controller가 결정하는 모든 주체(예: 사람, 조직, 사물, 데이터 모델, 추상 개체 등)를 나타 냅니다.

- 특히, 다른 당사자가 DID 와 관련된 정보의 검색을 가능하게 하는 데 도움이 될 수 있지만 설계를 통해 DID 컨트롤러는 다른 당사자의 허가 없이도 DID 에 대한 제어를 증명가능

- 연합 식별자와 달리 DID 는 중앙 레지스트리, ID 공급자 및 인증 기관에서 분리될 수 있도록 설계

## 등장 배경
- 현실에서 가장 중요한 가치를 담고 있는 정보는 바로 신원(ID)에 대한 정보인데, 개인의 신원 정보를 다른 누군가가 마음대로 복제할 수 있게 된다면 인터넷 환경에서 '나'라는 존재 역시 무한대로 복제될 수 있음을 의미
- 때문에 현재의 인터넷 환경에서 신원정보를 공유할 때 반드시 '신뢰할 수 있는 제3자 기관(TTP)'이 보증한 인증서가 필요'
  -  정부 사이트나 금융 애플리케이션 등에서 공인인증서를 요구하는 이유
- 현재 신원정보를 이용하고 관리하는 데는 상당한 번거로움과 문제점
  - 먼저 공인인증서의 발급과 이용상의 불편함
  - 인증서를 발급하고 이용하는 과정에서 상당한 시간 소요됨
  - 신원 데이터의 유출과 도용범죄의 우려 (중앙 서버에 저장된 데이터)

## 특징
### 신원관리
분산아이디는 서비스제공자에 의해 신원정보가 관리되지 않으므로, 서비스 제공자의 서비스 운영 중지 등 외부환경 변화와 관계없이 사용자는 자신의 신원정보 유효성을 유지하고 지속해서 사용 가능하다(지속성).

 그리고 피어(Peer) 기반으로 신원정보의 발행ㆍ검증은 특정 기관에 종속적이지 않고, 피어기반으로 독립적으로 운영, 누구나 필요한 신원 정보를 생성ㆍ이용 가능하며, 신원증명이 필요한 경우 언제든 사용자는 스스로 신원정보를 선택 후 제공, 사용자의 휴대성을 위해 스마트폰 등을 이용한 모바일 아이디, 칩이 내장된 실물카드 형태의 아이디 카드 등으로 이용 가능하여 휴대성이 있다. 
 
 또한, 개인의 명시적인 동의 없이는 서비스제공자의 개인정보 활용 등이 제한, 사용자가 신원정보를 스스로 관리하므로, 서비스제공자는 서비스에 필요한 정보 이외의 개인정보 및 타 기관에서의 사용자 서비스 이용 내역 등은 확인이 불가능하다.
 
  분산원장 기반의 신뢰된 아이디 저장소는 개인정보가 포함된 신원정보는 암호화 등 조치를 수행하거나, 오프체인에 저장함으로 개인정보를 보호하는 특징이 있다.

또한 분산아이디는 블록체인을 기반으로 한 신분증으로, 이용자 스스로 자신의 신원정보를 관리하고 통제할 수 있도록 하는 디지털화된 신원관리 체계다. 우리가 지갑에 주민등록증을 보관하고 필요할 때 꺼내 나를 증명하는 것처럼, 개인 블록체인 지갑에 내 개인정보를 담아 필요한 때 개인키를 입력해 나를 증명하는 것이다. 

(개인)정보사용 및 제공의 주체가 기업에서 개인으로 변화하고 있는 상황에서 분산ID를 도입하면 개인이 특정 기관과 상호작용할 때, 신원주체가 그 흐름을 통제할 수 있어 신원정보를 투명하게 관리할 수 있다.

### 신원정보 저장위치
|저장위치	|특징	|관련 업체|
|---|---|---|
|분산원장 내 암호화하여 저장|	분산원장 내 신원정보가 암호화되어 저장되며, 사용자는 복호화에 필요한 키를 관리한다.|	더키닷브이아피(thekey.vip)
|사용자 모바일단말 내 저장|	사용자 모바일 내 신원정보가 저장되며, 사용자는 서비스제공자에게는 필요한 신원정보만 선택하여 제공이 가능하다.|	소브린(Soverin), 유포트(uPort)
|발급기관 내 저장|	신원정보를 발급하는 기관에서 저장하며,사용자가 동의한 경우에만 서비스제공자에게 신원정보를 제공한다.|	시큐어키(Securekey)|

### 인증
분산아이디의 체계는 쉽게 말하자면 분산아이디 프로젝트에서 개발한 애플리케이션에서 사용자는 자신의 개인정보를 노출하지 않은 채 스스로 분산아이디를 발급하는 개념이다. 

사용자는 분산아이디를 발급한 이후에, 예를 들어 자신이 대학생이라는 자격증명(Verifiable Claim)을 자신이 재학중인 대학교를 통해서 발급받고 영화관이나 놀이동산에서 대학생임을 인증하여 할인가로 서비스를 이용할 수 있는 프로모션에 참여할 수 있다. 이러한 체계가 구축되면 군인, 청소년, 직장인(피고용인)임을 인증할 수 있게 된다.

분산아이디인증 아키텍처는 Challenge(요청), Response(회신), Transports(전송)에 근거하여 구성할 수 있다. 아키텍처 구성시 참고사항은, 1) 요청 시점에서 Relying Party(Service Provider)의 분산아이디를 알고 있는지 여부, 2) 분산아이디인증 요청의 전송 메커니즘, 3) 인증자료의 저장위치, 4) 분산아이디인증 응답의 전송 메커니즘이다. 사용 사례를 보자면 아래와 같다.

- **사례 1**
  - Relying Party(신뢰 당사자): The individual, organization or thing that authenticates an identity owner using a DID Auth protocol. Also called “Verifier” in other specifications. (Verifier or Service Provider-신뢰 당사자, 검증인, 서비스 공급자): DID Auth 프로토콜을 사용하여 ID 소유자를 인증하는 개인, 조직 또는 사물. Verifier (검증인)or Service Provider(서비스 공급자)

1) 신뢰 당사자의 웹 페이지는 신원 소유자의 웹 브라우저에 QR코드(요청 포함)를 표시한다.
2) 신원 소유자(holder)의 모바일 앱은 신원 소유자의 웹 브라우저에서 QR코드(요청 포함)를 스캔한다.
3) 신원 소유자의 모바일 앱은 신뢰 당사자의 웹 서버에 HTTP POST(회신 포함)를 보낸다.
4) 신뢰 당사자의 웹 서버는 신뢰 당사자의 웹 페이지를 통해 HTTP GET(회신 포함)으로 폴링된다.
-> **Mykeepin 부정거래 확인 시 같은 플로우로 진행**

- **사례 2**
1) 신뢰 당사자의 모바일 웹 페이지는 딥링크(요청 포함)를 통해 아이디 소유자의 모바일 앱으로 리디렉션된다.
2) 아이디 소유자의 모바일 앱은 신뢰 당사자의 웹 서버에 대한 응답과 함께 리턴 링크를 연다.
3) 신뢰 당사자의 웹 서버가 신뢰 당사자의 모바일 웹 페이지를 업데이트한다.
- **사례 3**
1) 신뢰 당사자 웹 페이지에는 신뢰 당사자 웹 서버를 호출하는 링크 또는 버튼이 있다.
2) 신뢰 당사자의 웹 서버는 자격 증명 소유자의 분산아이디인증 서비스에 HTTP POST(요청 포함)를 보낸다.
3) 신원 소유자의 분산아이디인증 서비스는 신원 소유자의 모바일 앱에 푸시 알림(요청 포함)을 보낸다.
4) 아이디 소유자의 모바일 앱은 신뢰 당사자의 웹 서버에 HTTP POST(회신 포함)를 보낸다.
- **사례 4**
1) 신뢰 당사자가 웹 페이지에는 신뢰 당사자 웹 서버를 호출하는 링크 또는 버튼이 있다.
2) 신뢰 당사자의 웹 서버는 자격 증명 소유자의 분산아이디인증 서비스에 HTTP POST(요청 포함)를 보낸다.
3) 신원 소유자의 분산아이디인증 서비스는 신원 소유자의 모바일 앱에 푸시 알림(요청 포함)을 보낸다.
4) 신원 소유자의 모바일 앱은 신원 소유자의 분산아이디인증 서비스에 HTTP POST(회신 포함)를 보낸다.
5) 아이디 소유자의 분산아이디인증 서비스는 신뢰 당사자의 웹 서버에 HTTP POST(회신 포함)를 보낸다.
6) 신뢰 당사자의 웹서버는 신뢰 당사자의 웹 페이지에 의해 HTTP GET(회신 포함)으로 폴링된다.
- **사례 5**
1) 신뢰 당사자 웹 페이지에는 신뢰 당사자 웹 서버를 호출하는 링크 또는 버튼이 있다.
2) 신뢰 당사자의 웹 서버는 자격 증명 소유자의 웹 브라우저에 요청이 있는 HTTP 리디렉션을 보낸다.
3) 신원 소유자의 웹 브라우저는 요청된 신원 소유자의 분산아이디인증 웹 페이지로 HTTP 리디렉션을 따른다.
4) 신원 소유자의 분산아이디인증 웹 페이지는 신원 소유자의 모바일 앱 또는 다른 장치와 선택적으로 상호 작용한다.
5) 아이디 소유자의 분산아이디인증 웹 페이지는 HTTP 응답을 따라 신뢰 당사자의 웹 서버로 이동한다.
6) 신뢰 당사자의 웹 서버가 신뢰 당사자의 웹 페이지를 업데이트한다.
-> **Digital Bazaar의 Credential Handler API**

### 성인인증
주류나, 여타 성인이 인증이 필요한 서비스에서 인증이 필요하다. 실생활에서는 사용자가 신분증 발급 신청서와 확인 소명 자료를 주민센터에 제출하고 주민센터는 제출 서류로 신분증을 발급해준다. 

사용자는 신분증을 수령하고 주류 구매 시 마트 직원에게 신분증을 직접 제시하여 성인인증이 가능하다. 온라인 인증의 경우 사용자가 공인인증서 발급기관 또는 등록 기관(은행/증권사) 방문 후 주민등록증을 제시하면 등록기관에서 공인인증서 발급을 신청하고 발급이 완료되면 기타 저장수단을 통해 공인인증서를 저장한다. 이후 온라인에서 공인인증서와 함께 주민등록번호를 제시함으로써 성인인증이 가능하다.

분산아이디인증의 경우에는 사용자가 개인 증명 자료와 요청 정보를 Issuer에게 제출하면, Issuer는 증명 자료와 요청 정보를 기반으로 Verifiable Claim을 발급해준다. 사용자는 Verifiable Claim를 저장하고 온라인 마트에서 주류 구매 시 Verifiable Claim 제출하는 과정으로 성인인증을 한다.

### PPID
PPID(Pairwise-pseudonymous DIDs) : 하나의 분산아이디만 있다면, 주민번호와 같이 그 아이디 하나로 개인의 모든 사항을 유추해 볼 수 있게 된다. 분산아이디는 수천개의 개인 분산아이디를 생성해서 각 서비스마다 별도로 이용할 수 있도록 하고있어, 개인의 동의 없이 추가적인 정보를 유추할 수 없도록 하고 있다.

오프체인 개인 데이터(Off-chain private data) : 개인 정보가 아무리 암호화가 되었더라도 공개된 공간에 저장되는 것은 위험성이 크다. 분산아이디는 모든 개인정보를 오프체인으로 자신의 단말에만 저장하고, 교환이 필요한 경우에만 암호화하여 필요한 곳에만 제공하여, 동의 없는 개인정보 유출을 방지한다.
선택적 공개(Selective disclosure) : 암호학과 영지식증명(zero knowledge proof) 기술을 사용하여, 필요한 정보만 노출할 수 있다.

- 온체인 : 블록체인에 데이터를 올림, 오프체인 : 블록체인에 올리지 않은 데이터  

## 큰 틀의 구조도

<img src="https://user-images.githubusercontent.com/75015048/152626540-891c443a-56e8-4558-8745-0e135b5b6821.png" width="80%" />

#### Benny 님의 자료
- 아래 운전면허 등록을 중앙 기관이 발급해야한다. 이 부분은 다른 기관의 참여가 필요하다고 생각한 뜻을 굳히게  만들어줬다.

<img src="https://user-images.githubusercontent.com/75015048/152626762-166cf40f-ed09-4a6f-904d-dc37a25e6bc8.png" width="50%" />



# 참고 
[SSI - 위키](https://en.wikipedia.org/wiki/Self-sovereign_identity)

[디지털 아이덴티티 – 블록체인 기술로 안전한 협업 가능 - BOSCH](https://www.bosch.com/stories/self-sovereign-identities/)

[자기-주권-신원과-구성-요소](https://fortheneedy.medium.com/%EC%9E%90%EA%B8%B0-%EC%A3%BC%EA%B6%8C-%EC%8B%A0%EC%9B%90%EA%B3%BC-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C-self-sovereign-identity-452df0e36936)

[자주적 정체성으로 가는 길 - 크리스토퍼 앨런](http://www.lifewithalacrity.com/2016/04/the-path-to-self-soverereign-identity.html)

[W3C - DID CORE](https://www.w3.org/TR/did-core/)

[Benny - 블록체인과 디지털 아이디](https://benny-jung.medium.com/did-%EB%8F%99%ED%96%A5-blockchain-and-digital-identity-8cd2770cf36e)

[분산 아이디 - 해시넷](http://wiki.hash.kr/index.php/%EB%B6%84%EC%82%B0%EC%95%84%EC%9D%B4%EB%94%94#.EB.A7.88.EC.9D.B4.ED.81.AC.EB.A1.9C.EC.86.8C.ED.94.84.ED.8A.B8)
